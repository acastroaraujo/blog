<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="andrés castro araújo">
<meta name="dcterms.date" content="2024-01-04">
<meta name="description" content="Please don’t.">

<title>blog - Fetishism and The “Variables Paradigm”</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta property="og:title" content="blog - Fetishism and The “Variables Paradigm”">
<meta property="og:description" content="Please don’t.">
<meta property="og:image" content="https://github.com/acastroaraujo/blog/posts/2024-01-04-fetishism-and-the-variables-paradigm/redpill.jpeg">
<meta property="og:site-name" content="blog">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://acastroaraujo.github.io" rel="" target=""><i class="bi bi-house" role="img">
</i> 
 <span class="menu-text">about</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://acastroaraujo.github.io/cv/" rel="" target=""><i class="bi bi-file-person" role="img">
</i> 
 <span class="menu-text">cv</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/acastroaraujo" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">github</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target=""><i class="bi bi-chat-text" role="img">
</i> 
 <span class="menu-text">blog</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools ms-auto">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Fetishism and The “Variables Paradigm”</h1>
                  <div>
        <div class="description">
          <p>Please don’t.</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Sociology</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>andrés castro araújo </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 4, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Karl Marx’s criticism of commodity fetishism is very similar to Andrew Abbott’s criticism of the so-called “variables-based approach” in sociology (i.e., most standard quantitative research).</p>
<p>The former denounces the idea of “value” as an alleged property of commodities <em>(and not people doing things)</em> to be a capitalist illusion. The latter denounces the idea of “causality” as an alleged property of variables <em>(and not people doing things)</em> to be a positivist illusion. Both criticism are usually blown out of proportions, mostly because it’s hard to believe that there’s someone out there who really believe what they’re being accused of believing.</p>
<p>Before getting into detail, let me note the following:</p>
<ul>
<li><p>This kind of criticism exhibits an “unmasking style” which I find to be deeply childish <span class="citation" data-cites="baehr2019">(cf. <a href="#ref-baehr2019" role="doc-biblioref">Baehr 2019</a>)</span>. The idea is that you get to be some kind of deep critical thinker that somehow has gained a unique access to a “reality” that is hidden from less sophisticated individuals.</p></li>
<li><p>It gives off the same vibes as Plato’s Cave; Marxist false consciousness; and that one famous red pill scene from The Matrix.</p></li>
<li><p>The critic (usually self-described as “critical thinker”) is in a unique position to expose some widespread delusion and show that what “normal” people believe to be true is in reality false.</p>
<p>This ambition is deeply ingrained in the discipline. “The first wisdom of sociology” according to Peter Berger is that “things are not what they seem.” <em>Wake up, sheeple!</em></p></li>
<li><p>In order to engage in such criticism, the best strategy is to write in such a way that makes other people look foolish (or at least unsophisticated simpletons).</p></li>
<li><p>This is related to what Kieran Healy calls the <em>nuance of the connoisseur.</em></p>
<blockquote class="blockquote">
<p>Connoisseurs call for the contemplation of complexity almost for its own sake or remind everyone that things are subtler than they seem. The attractive thing about this move is that it is always available to the person who wants to make it. Theory is founded on abstraction, abstraction means throwing away detail for the sake of a bit of generality, and so things in the world are always “more complicated than that”—for any value of “that.” Connoisseurship gets its aesthetic bite from the easy insinuation that the person trying to simplify things is a bit less sophisticated a thinker than the person pointing out that things are more complicated.</p>
<p><span class="citation" data-cites="healy2017">Healy (<a href="#ref-healy2017" role="doc-biblioref">2017, p. 123</a>)</span></p>
</blockquote></li>
</ul>
<section id="commodity-fetishism" class="level2">
<h2 class="anchored" data-anchor-id="commodity-fetishism">Commodity Fetishism</h2>
<blockquote class="blockquote">
<p>A commodity appears at first sight an extremely obvious, trivial thing. But its analysis brings out that it is a very strange thing, abounding in metaphysical subtleties and theological niceties.</p>
<p>— Karl Marx, <em>Capital</em></p>
</blockquote>
<p>The commodity fetishism argument is an invitation to look beyond the <em>surface</em> of appearances, an illusion according to which “the definite social relation between men themselves” assumes “the fantastic form of a relation between things.”</p>
<p>The accusation is that normal people see value as an <em>intrinsic</em> property of commodities and fail to see it for what it is: a <em>relational</em> property<em>.</em></p>
<p>This is the best two-paragraph explanation I’ve seen of what all this means.</p>
<blockquote class="blockquote">
<p>There are two ways of ascribing properties to objects. Both have the same surface grammatical form: <span class="math inline">\(A\)</span> is <span class="math inline">\(F\)</span>. The book is red, the man is tall, the woman is rich. They differ, however, at a deeper level. The height of a person is a quality that inheres in him quite independently of social context. Wealth, on the other hand, can only be predicated of a person who is inserted in a web of social relations. It makes sense to say that Robinson Crusoe on his island was tall, not that he was rich, even if perhaps he brought some gold coins along with him. To be rich means that other people are willing to exchange their goods or labor for your money. Being rich, unlike being tall, is a relational predicate.</p>
<p>[…]</p>
<p>Commodity fetishism is the belief that goods possess value just as they have weight, as an inherent property. To the unmystified mind, it is clear that a commodity has exchange value only because it stands in certain relations to human labor and human needs. In the bewitched world of commodity fetishism, however, goods appear to exchange at a certain rate because of their inherent values. Such, at any rate, was Marx’s argument. <em>It is somewhat unconvincing, because it is hard to believe that anyone ever committed this particular fallacy.</em></p>
<p><span class="citation" data-cites="elster1986">Elster (<a href="#ref-elster1986" role="doc-biblioref">1986, pp. 56–57</a>, emphasis added)</span></p>
</blockquote>
<p>I agree. It’s hard to believe that anyone has ever thought about the value of commodities in this way. But being more sophisticated than others makes us <em>feel</em> <em>good</em> and motivated reasoning is one helluva drug <span class="citation" data-cites="kunda1990">(<a href="#ref-kunda1990" role="doc-biblioref">Kunda 1990</a>)</span>.</p>
<p><em>Note. Other accusations of economic fetishism are more on point. For example, the idea that “money” has an intrinsic value (especially in the form of gold or silver) has been an amply documented illusion throughout history. A similar dynamic happens with “capital” when it’s considered as raw materials or instruments of labor; the “stuff” we identify as capital only becomes capital when it’s embedded in a process of accumulation M-C-M′.</em></p>
<p><em>Thus, arguments about fetishism may hold true in certain domains (e.g., money, capital), but we shouldl doubt about the truthfulness of the more narrow commodity fetishism argument.</em></p>
</section>
<section id="the-variables-paradigm" class="level2">
<h2 class="anchored" data-anchor-id="the-variables-paradigm">The “Variables Paradigm”</h2>
<p>Some time ago Andrew Abbott <span class="citation" data-cites="abbott2001">(<a href="#ref-abbott2001" role="doc-biblioref">2001</a>)</span> mounted an attack on traditional quantitative researchers by accusing them of foolishly believing that “variables do things, not social actors.”</p>
<p>Here are the charges:</p>
<ul>
<li><p>Quantitative researchers simplify too much.</p></li>
<li><p>They forget the importance of narrative.</p></li>
<li><p><em>They are</em> <em>plain silly</em>.</p>
<p>They don’t see individuals as <em>motivated</em> <em>actors</em>, but merely as the locale for the variables “doing their thing” <span class="citation" data-cites="abbott2001">(<a href="#ref-abbott2001" role="doc-biblioref">Abbott 2001, p. 132</a>)</span>. For example, they actually believe that some disembodied abstraction called <span class="allcaps">education</span> acts on another disembodied abstraction called <span class="allcaps">occupation</span>.</p>
<blockquote class="blockquote">
<p>Our normal methods parse social reality into fixed entities with variable qualities. They attribute causality to the variables—hypostatized social characteristics—rather than to agents; variables do things, not social actors.</p>
<p><span class="citation" data-cites="abbott2001">Abbott (<a href="#ref-abbott2001" role="doc-biblioref">2001, p. 183</a>)</span></p>
</blockquote></li>
</ul>
<!-- -->
<ul>
<li><p>They ignore that social activity is located space and time, unlike the always rich and sophisticated Chicago School.</p>
<blockquote class="blockquote">
<p>For the idea of a variable is the idea of a scale that has the same causal meaning whatever its context: the idea, for example, that “education” can have “an effect” on “occupation’ irrespective of the other qualities of an individual, whether those qualities be other past experiences, other personal characteristics, or friends, acquaintances, and connections. Within variable-based thinking, one allows for a few”interactions” to modify this single causal meaning contextually, but the fundamental image of variables’ independence is enshrined in the phrase “net of other variables” and in the aim to discover this net effect, whether through experimental or statistical manipulation. The Chicago view was that the concept of net effect was social scientific nonsense. Nothing that ever occurs in the social world occurs “net of other variables.” All social facts are located in contexts. So why bother to pretend that they are not?</p>
<p><span class="citation" data-cites="abbott1997">Abbott (<a href="#ref-abbott1997" role="doc-biblioref">1997, p. 1152</a>)</span></p>
</blockquote></li>
</ul>
<p>The problem with this discussion is that the target of criticism—the “variables paradigm”—does not exist. It has never existed. <em>It’s hard to believe that someone out there is really that dumb.</em></p>
<p>In a particularly egregious example of bad faith, Andrew Abbott reads a couple of articles from the <em>American Journal of Sociology</em> and finds that “narrative sentences usually have variables as subjects” <span class="citation" data-cites="abbott2001">(<a href="#ref-abbott2001" role="doc-biblioref">Abbott 2001, p. 140</a>)</span>.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> Now imagine overhearing a conversation in which someone mentions the sunset and then rushing to call them a fool for believing the sun revolves around the earth. It is deeply obnoxious.</p>
<p><em>Note. After writing the above I came across Mustafa Emirbayer’s <span class="citation" data-cites="emirbayer1997">(<a href="#ref-emirbayer1997" role="doc-biblioref">1997</a>)</span> “Manifesto for a Relational Sociology.” Among other things, he argues that it’s futile for quantitative researchers to adjust for confounders because all such attempts “ignore the ontological embeddedness or locatedness of entities within actual situational contexts” <span class="citation" data-cites="emirbayer1997">(<a href="#ref-emirbayer1997" role="doc-biblioref">Emirbayer 1997, p. 289</a>)</span>. Yikes! Of course, he quotes Andrew Abbott extensively on the short-comings of the “variables paradigm.”</em></p>
<p><em>TL;DR it’s all a bunch of self-congratulatory nonsense.</em></p>
</section>
<section id="data-and-phenomena" class="level2">
<h2 class="anchored" data-anchor-id="data-and-phenomena">Data and Phenomena</h2>
<p>As mentioned in a previous <a href="https://acastroaraujo.github.io/blog/posts/2023-12-31-data/">blogpost</a>, I find it useful to distinguish between data and phenomena:</p>
<ul>
<li><p><strong>Phenomena</strong>: recurrent features of the world.</p></li>
<li><p><strong>Data</strong>: “public records produced by measurement and experiment that serve as evidence for the existence or features of phenomena” <span class="citation" data-cites="woodward2011">(<a href="#ref-woodward2011" role="doc-biblioref">Woodward 2011, p. 166</a>)</span></p></li>
</ul>
<p>The criticism of the so-called “variables paradigm” may be valid in the rare circumstances in which researchers forget this distinction; or in cases in which people conflate data mining with the scientific modeling of real-world phenomena.</p>
<p>Self-proclaimed critical thinkers might complain and insist that quantitative research is riddled with variable fetishism; that GLMs and DAGs merely depict relationships between variables, not between real-world phenomena; and that convenient figures of speech reveal some kind of weird metaphysics.</p>
<p>But, I assure you, <em>no one out there thinks that variables “cause” other variables in some weird kind of social vacuum.</em></p>



</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-abbott1997" class="csl-entry" role="listitem">
Abbott, Andrew. 1997. <span>“Of Time and Space: The Contemporary Relevance of the Chicago School.”</span> <em>Social Forces</em> 75(4): 1149–82.
</div>
<div id="ref-abbott2001" class="csl-entry" role="listitem">
———. 2001. <em>Time Matters: On Theory and Method</em>. University of Chicago Press.
</div>
<div id="ref-baehr2019" class="csl-entry" role="listitem">
Baehr, Peter. 2019. <em>The Unmasking Style in Social Theory</em>. Routledge.
</div>
<div id="ref-elster1986" class="csl-entry" role="listitem">
Elster, Jon. 1986. <em>An Introduction to Karl Marx</em>. Cambridge: Cambridge University Press.
</div>
<div id="ref-emirbayer1997" class="csl-entry" role="listitem">
Emirbayer, Mustafa. 1997. <span>“Manifesto for a Relational Sociology.”</span> <em>American journal of sociology</em> 103(2): 281317.
</div>
<div id="ref-healy2017" class="csl-entry" role="listitem">
Healy, Kieran. 2017. <span>“Fuck Nuance.”</span> <em>Sociological Theory</em> 35(2): 118127.
</div>
<div id="ref-kunda1990" class="csl-entry" role="listitem">
Kunda, Ziva. 1990. <span>“<a href="https://psycnet.apa.org/record/1991-06436-001">The Case for Motivated Reasoning.</a>”</span> <em>Psychological bulletin</em> 108(3): 480.
</div>
<div id="ref-woodward2011" class="csl-entry" role="listitem">
Woodward, James F. 2011. <span>“Data and Phenomena: A Restatement and Defense.”</span> <em>Synthese</em> 182: 165179.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>“My procedure is simple. I find all the narrative sentences, the sentences whose predicates are activities or parts of the social process. I then consider who are the subjects of these sentences, what kinds of activities are involved, and how the predicates are related to causality” <span class="citation" data-cites="abbott2001">(<a href="#ref-abbott2001" role="doc-biblioref">Abbott 2001, p. 130</a>)</span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>